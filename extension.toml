# Extension metadata
id = "quarto"
name = "Quarto"
version = "0.2.0"
schema_version = 1
authors = ["Chris Kennedy <chrisken@gmail.com>"]
description = "Quarto authoring for Zed with tree-sitter-quarto grammar"
repository = "https://github.com/ck37/zed-quarto-extension"

# Language configurations
# The quarto language configuration is in languages/quarto/config.toml
# It includes syntax highlighting queries at languages/quarto/highlights.scm (currently unused)
# and injections.scm for embedded code blocks (Python, R, Julia, etc.)
languages = ["languages/quarto"]

# Grammar configuration for tree-sitter-quarto
# NOTE: Zed does NOT support truly vendored grammars
# - When repository/commit are specified, Zed ALWAYS clones from the repo
# - The path field is for subdirectory within the repo (like tree-sitter-pandoc-markdown)
# - Zed ignores any pre-existing files in grammars/quarto/
#
# Current approach:
# - Zed clones tree-sitter-quarto from GitHub at specified commit
# - Zed compiles the grammar and loads queries from the clone
# - build.rs compiles vendored grammar source for local tests only
# - Tests run against vendored version at grammars/quarto/ (for reproducibility)
#
# Query file resolution:
# - Zed loads queries from: grammars/quarto/queries/highlights.scm (default location)
# - The grammar repo also has: queries/zed/highlights.scm (Zed-compatible scopes)
# - We've patched: queries/highlights.scm is a copy of queries/zed/highlights.scm
# - This ensures Zed uses @text.* scopes instead of @markup.* scopes
[grammars.quarto]
repository = "https://github.com/ck37/tree-sitter-quarto"
commit = "c9f444e88fc6f787c660bf52b0e23879a8fc66c2"

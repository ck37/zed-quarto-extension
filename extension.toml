# Extension metadata
id = "quarto"
name = "Quarto"
version = "0.2.0"
schema_version = 1
authors = ["Chris Kennedy <chrisken@gmail.com>"]
description = "Quarto authoring for Zed with tree-sitter-quarto grammar"
repository = "https://github.com/ck37/zed-quarto-extension"

# Language configurations
# The quarto language configuration is in languages/quarto/config.toml
# It includes syntax highlighting queries at languages/quarto/highlights.scm (currently unused)
# and injections.scm for embedded code blocks (Python, R, Julia, etc.)
languages = ["languages/quarto"]

# Grammar configuration for tree-sitter-quarto
# Zed grammar configuration uses repository + rev fields per docs:
# https://github.com/zed-industries/zed/blob/main/docs/src/extensions/languages.md
#
# Development approach:
# - For production: use GitHub repository URL with specific commit SHA
# - For local dev: can use file:// URL to load from local filesystem
# - build.rs compiles vendored grammar at grammars/quarto-vendored/ for local tests
# - Tests run against vendored version for reproducibility
#
# Query file resolution:
# - Zed loads queries from: queries/highlights.scm (in grammar repo)
# - Grammar repo has: queries/zed/highlights.scm (Zed-compatible @text.* scopes)
# - We've patched: queries/highlights.scm is a copy of queries/zed/highlights.scm
# - This ensures Zed themes can style the syntax correctly
#
# IMPORTANT: When changing the repository or rev below:
# 1. Update build.rs QUARTO_COMMIT constant to match
# 2. Update test files if directory structure changes
# 3. Verify grammars/quarto-vendored/ has matching commit
[grammars.quarto]
repository = "https://github.com/ck37/tree-sitter-quarto"
rev = "9f7e5d2ef6af2af9dd47b259d9d50fa5d0e18638"
